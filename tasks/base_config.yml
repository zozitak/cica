---
- hosts: localhost
  become: yes

  tasks:
    - name: Clone dotfiles Repository
      ansible.builtin.command: git clone --bare https://github.com/zozitak/.dotfiles.git {{ lookup('env', 'HOME') }}/.dotfiles
      args:
        creates: {{ lookup('env', 'HOME') }}/.dotfiles

    - name: 
      ansible.builtin.command: alias dotfiles=/usr/bin/git --git-dir={{ lookup('env', 'HOME') }}/.dotfiles/ --work-tree={{ lookup('env', 'HOME') }}

    - name: 
      ansible.builtin.command: dotfiles checkout -f

    - name: 
      ansible.builtin.command: dotfiles config --local status.showUntrackedFiles no
